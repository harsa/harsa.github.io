"use strict";angular.module("typetestApp",["ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]),angular.module("typetestApp").controller("MainCtrl",["$scope","$document","$timeout",function(a,b,c){var d=["the","of","and","to","a","in","for","is","on","that","by","this","with","i","you","it","not","or","be","are","from","at","as","your","all","have","new","more","an","was","we","will","home","can","us","about","if","page","my","has","search","free","but","our","one","other","do","no","information","time","they","site","he","up","may","what","which","their","news","out","use","any","there","see","only","so","his","when","contact","here","business","who","web","also","now","help","get","pm","view","online","c","e","first","am","been","would","how","were","me","s","services","some","these","click","its","like","service","x","than","find","price","date","back","top","people","had","list","name","just","over","state","year","day","into","email","two","health","n","world","re","next","used","go","b","work","last","most","products","music","buy","data","make","them","should","product","system","post","her","city","t","add","policy","number","such","please","available","copyright","support","message","after","best","software","then","jan","good","video","well","d","where","info","rights","public","books","high","school","through","m","each","links","she","review","years","order","very","privacy","book","items","company","r","read","group","sex","need","many","user","said","de","does","set","under","general","research","university","january","mail","full","map","reviews","program","life","know","games","way","days","management","p","part","could","great","united","hotel","real","f","item","international","center","ebay","must","store","travel","comments","made","development","report","off","member","details","line","terms","before","hotels","did","send","right","type","because","local","those","using","results","office","education","national","car","design","take","posted","internet","address","community","within","states","area","want","phone","dvd","shipping","reserved","subject","between","forum","family","l","long","based","w","code","show","o","even","black","check","special","prices","website","index","being","women","much","sign","file","link","open","today","technology","south","case","project","same","pages","uk","version","section","own","found","sports","house","related","security","both","g","county","american","photo","game","members","power","while","care","network","down","computer","systems","three","total","place","end","following","download","h","him","without","per","access","think","north","resources","current","posts","big","media","law","control","water","history","pictures","size","art","personal","since","including","guide","shop","directory","board","location","change","white","text","small","rating","rate","government","children","during","usa","return","students","v","shopping","account","times","sites","level","digital","profile","previous","form","events","love","old","john","main","call","hours","image","department","title","description","non","k","y","insurance","another","why","shall","property","class","cd","still","money","quality","every","listing","content","country","private","little","visit","save","tools","low","reply","customer","december","compare","movies","include","college","value","article","york","man","card","jobs","provide","j","food","source","author","different","press","u","learn","sale","around","print","course","job","canada","process","teen","room","stock","training","too","credit","point","join","science","men","categories","advanced","west","sales","look","english","left","team","estate","box","conditions","select","windows","photos","gay","thread","week","category","note","live","large","gallery","table","register","however","june","october","november","market","library","really","action","start","series","model","features","air","industry","plan","human","provided","tv","yes","required","second","hot","accessories","cost","movie","forums","march","la","september","better","say","questions","july","yahoo","going","medical","test","friend","come","dec","server","pc","study","application","cart","staff","articles","san","feedback","again","play","looking","issues","april","never","users","complete","street","topic","comment","financial","things","working","against","standard","tax","person","below","mobile","less","got","blog","party","payment","equipment","login","student","let","programs","offers","legal","above","recent","park","stores","side","act","problem","red","give","memory","performance","social","q","august","quote","language","story","sell","options","experience","rates","create","key","body","young","america","important","field","few","east","paper","single","ii","age","activities","club","example","girls","additional","password","z","latest","something","road","gift","question","changes","night","ca","hard","texas","oct","pay","four","poker","status","browse","issue","range","building","seller","court","february","always","result","audio","light","write","war","nov","offer","blue","groups","al","easy","given","files","event","release","analysis","request","fax","china","making","picture","needs","possible","might","professional","yet","month","major","star","areas","future","space","committee","hand","sun","cards","problems","london","washington","meeting","rss","become","interest","id","child","keep","enter","california","porn","share","similar","garden","schools","million","added","reference","companies","listed","baby","learning","energy","run","delivery","net","popular","term","film","stories","put","computers","journal","reports","co","try","welcome","central","images","president","notice","god","original","head","radio","until","cell","color","self","council","away","includes","track","australia","discussion","archive","once","others","entertainment","agreement","format","least","society","months","log","safety","friends","sure","faq","trade","edition","cars","messages","marketing","tell","further","updated","association","able","having","provides","david","fun","already","green","studies","close","common","drive","specific","several","gold","feb","living","sep","collection","called","short","arts","lot","ask","display","limited","powered","solutions","means","director","daily","beach","past","natural","whether","due","et","electronics","five","upon","period","planning","database","says","official","weather","mar","land","average","done","technical","window","france","pro","region","island","record","direct","microsoft","conference","environment","records","st","district","calendar","costs","style","url","front","statement","update","parts","aug","ever","downloads","early","miles","sound","resource","present","applications","either","ago","document","word","works","material","bill","apr","written","talk","federal","hosting","rules","final","adult","tickets","thing","centre","requirements","via","cheap","nude","kids","finance","true","minutes","else","mark","third","rock","gifts","europe","reading","topics","bad","individual","tips","plus","auto","cover","usually","edit","together","videos","percent","fast","function","fact","unit","getting","global","tech","meet","far","economic","en","player","projects","lyrics","often","subscribe","submit","germany","amount","watch","included","feel","though","bank","risk","thanks","everything","deals","various","words","linux","jul","production","commercial","james","weight","town","heart","advertising","received","choose","treatment","newsletter","archives","points","knowledge","magazine","error","camera","jun","girl","currently","construction","toys","registered","clear","golf","receive","domain","methods","chapter","makes","protection","policies","loan","wide","beauty","manager","india","position","taken","sort","listings","models","michael","known","half","cases","step","engineering","florida","simple","quick","none","wireless","license","paul","friday","lake","whole","annual","published","later","basic","sony","shows","corporate","google","church","method","purchase","customers","active","response","practice","hardware","figure","materials","fire","holiday","chat","enough","designed","along","among","death","writing","speed","html","countries","loss","face","brand","discount","higher","effects","created","remember","standards","oil","bit","yellow","politicalx","increase","advertise","kingdom","base","near","environmental","thought","stuff","french","storage","oh","japan","doing","loans","shoes","entry"];a.testLengthMs=3e4;var e={SPACEBAR:32,BACKSPACE:8,RETURN:13},f=function(){a.wordIndex=0,a.charIndex=0,a.currentWord="",a.words=g(d).slice(0,60),a.words=a.words.map(function(a){return a+" "}),a.typedWords=[],a.timeElapsed=0,a.startedAt=null,a.measuredWPM=0},g=function(a){for(var b,c,d=a.length;d;)c=Math.floor(Math.random()*d--),b=a[d],a[d]=a[c],a[c]=b;return a},h=function(b){if(b===e.RETURN)return void(a.finished&&a.restartTest());if(!a.finished){var c;if(b===e.BACKSPACE)return a.charIndex?(delete a.typedWords[a.wordIndex][a.charIndex],a.charIndex--):a.wordIndex&&(delete a.typedWords[a.wordIndex],a.wordIndex--,a.charIndex=a.words[a.wordIndex].length-1),void a.$apply();c=b===e.SPACEBAR?" ":String.fromCharCode(b),a.typedWords[a.wordIndex]||(a.typedWords[a.wordIndex]=[]),a.typedWords[a.wordIndex][a.charIndex]=c,a.words[a.wordIndex].length-1===a.charIndex?(a.wordIndex++,a.charIndex=0):a.charIndex++,a.$apply()}},i=function(){return a.typedWords.map(function(b,c){return b.join("")===a.words[c]})},j=function(){a.startedAt?a.timeElapsed=(new Date).getTime()-a.startedAt.getTime():a.timeElapsed=0,c(j,100)};a.restartTest=function(){a.finished=!1,a.success=[],a.error=[],a.validation=[],f()},a.$watchGroup(["wordIndex","charIndex"],function(b,d){if(b[1]&&!a.startedAt&&(console.log("starting timer",b),a.startedAt=new Date,a.finished=!1,a.newHighScore=!1,c(function(){console.log("test ended"),a.finished=!0,a.measuredWPM=a.success*(60/(a.testLengthMs/1e3)),a.measuredWPM>a.highScore&&(window.localStorage.setItem("highScore",a.measuredWPM),a.highScore=a.measuredWPM,a.newHighScore=!0)},a.testLengthMs)),!a.finished){var e=i();a.validation=e.map(function(a){return a}),a.success=e.filter(function(a){return a}).length,a.failure=e.filter(function(a){return!a}).length}}),b.bind("keydown keypress",function(a){("keydown"===a.type&&a.keyCode===e.BACKSPACE||"keydown"===a.type&&a.keyCode===e.SPACEBAR||"keypress"===a.type&&a.keyCode&&a.keyCode!==e.BACKSPACE&&a.keyCode!==e.SPACEBAR)&&h(a.keyCode)}),a.highScore=window.localStorage.getItem("highScore")?window.localStorage.getItem("highScore"):0,f(),c(j,100)}]),angular.module("typetestApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="header" ng-show="!finished && !startedAt"> <h2 class="text-center">Start typing!</h2> </div> <div class="content"> <div class="text" ng-class="{finished: finished}"> <span ng-repeat="word in words" class="word" ng-class="{success: validation[$index], space: wordIndex === $index && charIndex +1  === word.length}"> <span ng-repeat="char in word track by $index" ng-class="{current: $parent.$index === wordIndex && $index === charIndex, error: typedWords[$parent.$index][$index] != words[$parent.$index][$index] && typedWords[$parent.$index][$index], traversed: $parent.$index < wordIndex || $parent.$index === wordIndex &&$index < charIndex }">{{char}}</span> </span> </div> </div> <div class="result fill"> <div ng-show="finished" class="results"> <h3 class="text-center">The results are in:</h3> </div> <div class="stats" ng-class="{finished: finished}"> <!--div>\n      <span>{{wordIndex}}</span>\n      <small>wordIndex</small>\n    </div>\n    <div>\n      <span>{{charIndex}}</span>\n      <small>charIndex</small>\n    </div--> <div ng-show="wordIndex"> <span>{{success / wordIndex * 100 | number: 1}}<span class="unit">%</span></span> <small>Accuracy</small> </div> <div ng-hide="finished"> <span>{{(testLengthMs - timeElapsed) / 1000| number : 1}}<span class="unit">sec</span></span> <small>Time remaining</small> </div> <div> <span>{{(success && !finished) ? success * (60 / ( timeElapsed / 1000)) : measuredWPM | number : 1}}</span> <small>Words per minute</small> </div> </div> <div ng-show="finished" class="results"> <p ng-show="newHighScore" class="text-center">New High score!</p> <p class="text-center">Your highest score is {{highScore}}</p> <button class="btn btn-default" ng-click="restartTest()">I can do better!</button> </div> </div>')}]);